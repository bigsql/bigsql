<!DOCTYPE html>
<html>
<head>
<style>
mark {
    background-color: green;
    color: black;
}
</style>
</head>
<body>
<h1>APG: A Pretty Good Command Line Interface</h1>

<p>APG is a package and update manager, similar to yum or apt-get, specifically for PostgreSQL
  and related community projects. PGC enables you to easily find and install
  packages, configure multiple versions of PostgreSQL, update existing applications,
  and control services by starting and stopping from the command line.
</p>

<h3>1.) Review the help file</h3>

Get into the product home directory at the command line.
Windows users don't prefix the <code>apg</code> command with <code>./</code> as shown
 in the below examples.
<p>Now run the <code>help</code> command to see that things are as expected
<pre>

   <font size=+1>$ ./apg help</font>

      <b>Usage:</b> apg command [component1]

      <b>Common commands:</b>
        <b>help</b>       - Show this help file
        <b>info</b>       - Display OS or component information
        <b>list</b>       - Display installed & available components
        <b>status</b>     - Display status of installed server components
        <b>start</b>      - Start server components
        <b>stop</b>       - Stop server components
        <b>tune</b>       - Basic tuning of a postgresql.conf file
        <b>update</b>     - Retrieve new list of available components
        <b>upgrade</b>    - Upgrade installed components to newer (compatible) versions
        <b>install</b>    - Install a component
        <b>remove</b>     - Remove a component

      <b>Advanced commands:</b>
        <b>init</b>       - Initialize a component
        <b>config</b>     - Configure a component
        <b>clean</b>      - Remove component files from download cache
        <b>enable</b>     - Enable a server component
        <b>disable</b>    - Disable a server component from starting automatically
</pre>


<br>
<h3>2.) Demonstrate the <code>apg</code> command line environment</h3>

The <code>info</code> command lists information about the OS or a component
<pre>
   <font size=+1>$ ./apg info</font>

      <b>            PGC:</b> v4.2.2  /home/pguser/bigsql
      <b>    User & Host:</b> pguser  machine-name 127.0.0.1
      <b>             Os:</b> Centos 7
      <b>       Hardware:</b> 16 GB, 2 x Intel Core i5-3210M @ 2.50GHz
      <b>Last Update UTC:</b> None


   <font size=+1>$ ./apg info pg11</font>

      <b>        Project:</b> pg (http://postgresql.org)
      <b>      Component:</b> Component: pg11 11.5.3-2
      <b>   Release Date:</b> 2016-05-12
      <b>          Stage:</b> prod
      <b>            Doc:</b> http://www.postgresql.org/docs/11.5/
      <b>       RelNotes:</b> http://www.postgresql.org/docs/11.5/static/release-11.5.html
      <b>      IsCurrent:</b> 1
      <b>    IsInstalled:</b> 1
      <b>           port:</b> 5432
      <b>        datadir:</b> /home/pguser/bigsql/data/pg11
      <b>         logdir:</b> /home/pguser/bigsql/data/logs/pg11
      <b>         status:</b> Running
      <b>      data size:</b> 7064 kB
      <b>       up since:</b> 2 minutes and 53 seconds
      <b>    connections:</b> 1/100

</pre>

<p>The <code>list</code> command displays installed and available components.  It confirms
that only the core<br> Postgres server component, in this case <code>pg11</code>, is installed
and enabled by default.
<pre>
   <font size=+1>$ ./apg list</font>
        <b><mark>Category     | Component      | Version    | Status         | Port     | Updates</mark></b>
        PostgreSQL     pg11                  11.5-1     Installed      5432
        Extensions     plprofiler-pg11       4.1-1      NotInstalled
</pre>

<br><h3>3.) Start and stop PostgreSQL</h3></br>
<br>
The <code>status</code> command confirms whether server components are listening on
their assigned ports.
<pre>
   <font size=+1>$ ./apg status</font>

       pg11 stopped on port 5432
</pre>

<br>
The <code>start</code> command will start up postgres
<pre>
   <font size=+1>$ ./apg start</font>

       pg11 starting on port 5432
</pre>

<br>
Running the <code>status</code> command displays information about installed server components.
<pre>
   <font size=+1>$ ./apg status</font>

       pg11 running on port 5432
</pre>

Now lets use the <code>stop</code> command to shutdown the server components.
<pre>
   <font size=+1>$ ./apg stop</font>

       pg11 stopping
</pre>

<br>

<h3>4.) Installing PostgreSQL Extensions</h3>
<p>Postgres by BigSQL includes additional useful extensions that can easily be
   installed to add additional functionality, procedural languages, or foreign
   data wrappers. Use the <code>list</code> command to see the extensions
   available for the Postgres versions installed:</p>

<pre><code class="bash">
  ./apg list --extensions pg11
  <b><mark>Category   | Component          | Version  | Status</mark></b>
  Extensions   plprofiler-pg11       4.1-1     NotInstalled
</code></pre>
<p>The following <code>install</code> command uses the optional '-d' command to
  install orface in the 'demo' database:</p>
<pre><code class="bash">  ./apg install orafce-pg11 -d demo
 ['plprofiler-pg11']
Get:1 http://s3.amazonaws.com/apgentral plprofiler-pg11-4.1-1-linux64
 Unpacking plprofiler-pg11-4.1-1-linux64.tar.bz2
  postgres=# CREATE EXTENSION plprofiler;
</code></pre>

</body>
